{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 7e4dedb490417d1ff51d","webpack:///./src/index.js","webpack:///./src/core/adjuster.js","webpack:///./src/core/filter.js","webpack:///./src/core/layer.js","webpack:///./src/core/resize.js"],"names":[],"mappings":"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","file":"plotit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Plotit\"] = factory();\n\telse\n\t\troot[\"Plotit\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7e4dedb490417d1ff51d\n **/","import Adjuster from './core/adjuster';\nimport Filter from './core/filter';\nimport Resize from './core/resize';\n\nmodule.exports = class Plotit {\n  constructor(props) {\n    let selector = props.selector || 'body';\n    this.$panel = document.querySelector(selector);\n  }\n\n  renderImage(imgSrc) {\n    if (this.$panel) {\n      let image,\n          $panel = this.$panel,\n          panelW = $panel.clientWidth,\n          panelH = $panel.clientHeight || 500;\n\n      let $canvas = document.createElement('canvas'),\n          context = $canvas.getContext('2d');\n\n      image = new Image();\n      image.crossOrigin = 'anonymous';\n      image.src = imgSrc;\n      this.image = image;\n\n      image.onload = () => {\n        let imageW = image.width,\n            imageH = image.height,\n            scale;\n\n        context.clearRect(0, 0, $canvas.width, $canvas.height);\n\n        if (imageW > imageH) {\n          scale = imageW / panelW;\n        } else {\n          scale = imageH / panelH;\n        }\n\n        imageW = imageW / scale;\n        imageH = imageH / scale;\n\n        $canvas.id = 'plotitCanvas';\n        $canvas.width = imageW;\n        $canvas.height = imageH;\n        \n        context.drawImage(image, 0, 0, $canvas.width, $canvas.height); \n\n        $panel.innerHTML = '';\n        $panel.appendChild($canvas);\n\n        this.$canvas = $canvas;\n        this.context  = context;\n        this.originData = this.getData($canvas);\n      }\n    }\n  }\n\n  getData(canvas) {\n    canvas = canvas || this.$canvas;\n    let context = canvas.getContext('2d') || this.context;\n    if (context) {\n      return context.getImageData(0, 0, canvas.width, canvas.height);\n    }\n  }\n\n  setData(data) {\n    let context = this.context || this.$canvas.getContext('2d');\n    if (context) {\n      this.clearData();\n      return context.putImageData(data, 0, 0);\n    }\n  }\n\n  clearData() {\n    let context = this.context || this.$canvas.getContext('2d');\n    if (context) {\n      return context.clearRect(0, 0, this.$canvas.width, this.$canvas.height);\n    }\n  }\n\n  resetImage() {\n    if (this.originData) {\n      this.setData(this.originData);  \n    }\n  }\n\n  removeImage() {\n    this.$panel.innerHTML = '';\n  }\n\n  processFilter(processor, canvas) {\n    \n    this.resetImage();\n\n    // new layer\n    Filter.newLayer(canvas);\n    // bind Util\n    Filter.bindUtil(this);\n\n    if (processor && typeof processor === 'string') {\n      processor = Filter[processor].bind(Filter);\n    }\n\n    // filter processing\n    if (processor && typeof processor === 'function') {\n      processor();\n      // filter render\n      Filter.renderLayer();\n    }\n\n  }\n\n  processPixel(processor, degree) {\n    if (this.getData()) {\n  \n      let imageData = imageData || this.getData(),\n          deg = +degree || 0,\n          pixel;\n\n      if (processor && typeof processor === 'string') {\n        processor = Adjuster[processor];\n        processor = processor ? processor.bind(Adjuster) : null;\n      }\n\n      if (processor && typeof processor === 'function') {\n        for (let i = 0; i < imageData.data.length; i += 4) {\n          let pixel = {\n            r: imageData.data[i + 0],\n            g: imageData.data[i + 1],\n            b: imageData.data[i + 2],\n            a: imageData.data[i + 3]\n          };\n\n          pixel = processor(pixel, deg);\n\n          imageData.data[i + 0] = pixel.r;\n          imageData.data[i + 1] = pixel.g;\n          imageData.data[i + 2] = pixel.b;\n          imageData.data[i + 3] = pixel.a;\n        }\n      }\n\n      this.setData(imageData);\n    }\n  }\n\n  processCrop(opts) {\n    Resize.cropImage(this.$canvas, opts);\n  }\n\n  processResize(originCanvas, scale, previewCanvas) {\n    // new layer\n    Resize.newFrame(originCanvas, scale);\n    // bind Util\n    Resize.bindUtil(this);\n    // set Preview\n    Resize.setPreview(previewCanvas);\n    // bind mousemove\n    Resize.bindFrame(scale);\n  }\n\n  getResizeFrame() {\n    return Resize.getFrame();\n  }\n\n  removeResizeFrame() {\n    Resize.removeFrame();\n  }\n\n  convertToBase64(size) {\n    let quality = 1,\n        maxSize = 10000000,\n        base64Str = '';\n\n    if (size > maxSize) {\n      quality = Math.floor(maxSize / size);\n    }\n\n    let imageData = this.getData();\n    \n    this.setData(imageData);\n\n    base64Str = this.$canvas.toDataURL(null, quality);\n\n    return base64Str.substring(base64Str.indexOf(',') + 1);\n  }\n\n}\n \n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","class PlotitAdjuster {\n  constructor() {\n    this.defaultDegree = 0;\n    this.options = ['r', 'g', 'b'];\n  }\n\n  checkOpts(pixel) {\n    var keys = Object.keys(pixel);\n    return this.options.every((item) => {\n      return keys.indexOf(item) !== -1;\n    });\n  }\n\n  // 亮度\n  brightness(pixel, degree) {\n    var deg = parseInt(degree || this.defaultDegree, 10);\n\n    deg = Math.floor(255 * (deg / 250));\n\n    if (this.checkOpts(pixel)) {\n      pixel.r += deg;\n      pixel.g += deg;\n      pixel.b += deg;\n    }\n\n    return pixel;\n  }\n\n  // 饱和度\n  saturation(pixel, degree) {\n    var deg = parseInt(degree || this.defaultDegree, 10);\n\n    if (this.checkOpts(pixel)) {\n      var max = Math.max(pixel.r , pixel.g, pixel.b);\n\n      pixel.r += (pixel.r !== max ? ((max - pixel.r) * (deg / 50)) : 0);\n      pixel.g += (pixel.g !== max ? ((max - pixel.g) * (deg / 50)) : 0);\n      pixel.b += (pixel.b !== max ? ((max - pixel.b) * (deg / 50)) : 0);\n\n    }\n    \n    return pixel;\n  }\n\n  // 对比度\n  contrast(pixel, degree) {\n    var deg = parseInt(degree || this.defaultDegree, 10);\n\n    deg = Math.pow((deg + 100) / 100, 2);\n\n    if (this.checkOpts(pixel)) {\n      // Red Channel\n      pixel.r /= 255;\n      pixel.r -= .5;\n      pixel.r *= deg;\n      pixel.r += .5;\n      pixel.r *= 255;\n      // Green Channel\n      pixel.g /= 255;\n      pixel.g -= .5;\n      pixel.g *= deg;\n      pixel.g += .5;\n      pixel.g *= 255;\n      // Blue Channel\n      pixel.b /= 255;\n      pixel.b -= .5;\n      pixel.b *= deg;\n      pixel.b += .5;\n      pixel.b *= 255;\n    }\n\n    return pixel;\n  }\n\n  // 褐度\n  sepia(pixel, degree) {\n    var deg = parseInt(degree || this.defaultDegree, 10) / 100;\n    if (this.checkOpts(pixel)) {\n      pixel.r = Math.min(255, (pixel.r * (1 - (0.607 * deg))) + (pixel.g * (0.769 * deg)) + (pixel.b * (0.189 * deg)));\n      pixel.g = Math.min(255, (pixel.r * (0.349 * deg)) + (pixel.g * (1 - (0.314 * deg))) + (pixel.b * (0.168 * deg)));\n      pixel.b = Math.min(255, (pixel.r * (0.272 * deg)) + (pixel.g * (0.534 * deg)) + (pixel.b * (1- (0.869 * deg))));;\n    }\n    return pixel;\n  }\n\n  // 噪点\n  noise(pixel, degree) {\n    var deg = parseInt(degree || this.defaultDegree, 10);\n\n    var randomRange = (min, max) => {\n      var rand = min + (Math.random() * (max - min));\n      return Math.round(rand) / 50;\n    }\n\n    deg = Math.abs(deg) * 255;\n\n    if (this.checkOpts(pixel)) {\n\n      var random = randomRange(deg * -1, deg);\n      \n      pixel.r += random;\n      pixel.g += random;\n      pixel.b += random;\n    }\n\n    return pixel;\n  }\n\n  // 灰度\n  greyscale(pixel) {\n    if (this.checkOpts(pixel)) {\n      var avg = (0.299 * pixel.r) + (0.587 * pixel.g) + (0.114 * pixel.b);\n      \n      pixel.r = avg;\n      pixel.g = avg;\n      pixel.b = avg;\n    }\n\n    return pixel;\n  }\n\n} \n\nexport default new PlotitAdjuster();\n \n\n\n/** WEBPACK FOOTER **\n ** ./src/core/adjuster.js\n **/","import Layer from './layer';\n\nclass PlotitFilter {\n  constructor() {\n    this.options = ['r', 'g', 'b'];\n  }\n\n  checkOpts(pixel) {\n    var keys = Object.keys(pixel);\n    return this.options.every((item) => {\n      return keys.indexOf(item) !== -1;\n    });\n  }\n\n  bindUtil(util) {\n    this.util = util;\n  }\n  \n  newLayer(canvas) {\n    this.canvas = canvas;\n    this.layer = new Layer(canvas, 'newFilter').layer;\n  }\n\n  renderLayer() {\n    this.canvas.getContext('2d').drawImage(this.layer, 0, 0);\n    console.log('render Filter ... is OK!');\n  }\n\n  moon() {\n    this.util.processPixel('greyscale');\n  }\n\n  toaster() {\n\n    this.util.processPixel('brightness', 40);\n    this.util.processPixel('contrast', 25);\n    \n    var ctx = this.layer.getContext('2d'),\n        width = this.layer.width,\n        height = this.layer.height,\n        x0 = width / 2,\n        y0 = height / 2,\n        r0 = (width > height ? width : height) / 10,\n        x1 = width / 2,\n        y1 = height / 2,\n        r1 = (width > height ? width : height) / 2;\n    \n    var grd = ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n    grd.addColorStop(0, 'rgba(255, 226, 114, .3)');\n    grd.addColorStop(1, 'rgba(172, 70, 186, .3)');\n    \n    ctx.fillStyle = grd;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n  _1977() {\n\n    this.util.processPixel('brightness', 20);\n    this.util.processPixel('saturation', -10);\n    this.util.processPixel('contrast', 20);\n\n    var ctx = this.layer.getContext('2d'),\n        width = this.layer.width,\n        height = this.layer.height,\n        x0 = width / 2,\n        y0 = height / 2,\n        r0 = (width > height ? width : height) / 2;\n\n    var grd = ctx.createRadialGradient(x0, y0, r0, 0, 0, 0);\n    grd.addColorStop(0, 'rgba(172, 70, 186, .2)');\n\n    ctx.fillStyle = grd;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n  aden() {\n    this.util.processPixel('brightness', 10);\n    this.util.processPixel('saturation', 15);\n    this.util.processPixel('contrast', 10);\n\n    var ctx = this.layer.getContext('2d'),\n        width = this.layer.width,\n        height = this.layer.height,\n        x0 = width / 2,\n        y0 = height / 2,\n        r0 = (width > height ? width : height) / 5,\n        x1 = width / 2,\n        y1 = height / 2,\n        r1 = (width > height ? width : height) / 2;\n\n    var grd = ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n    grd.addColorStop(0, 'rgba(96, 10, 14, .12)');\n    grd.addColorStop(1, 'transparent');\n\n    ctx.fillStyle = grd;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n  earlybird() {\n    this.util.processPixel('saturation', -20);\n    this.util.processPixel('sepia', 10);\n\n    var ctx = this.layer.getContext('2d'),\n        width = this.layer.width,\n        height = this.layer.height,\n        x0 = width / 2,\n        y0 = height / 2,\n        r0 = (width > height ? width : height) / 5,\n        x1 = width / 2,\n        y1 = height / 2,\n        r1 = (width > height ? width : height) / 2;\n\n    var grd = ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n    grd.addColorStop(0, 'rgba(208, 186, 142, .15)');\n    grd.addColorStop(1, 'rgba(54, 3, 9, .2)');\n\n    ctx.fillStyle = grd;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n  walden() {\n    this.util.processPixel('brightness', 25);\n    this.util.processPixel('saturation', -5);\n    this.util.processPixel('sepia', 6);\n\n    var ctx = this.layer.getContext('2d'),\n        width = this.layer.width,\n        height = this.layer.height,\n        x0 = width / 2,\n        y0 = height / 2,\n        r0 = (width > height ? width : height) / 2;\n\n    var grd = ctx.createRadialGradient(x0, y0, r0, 0, 0, 0);\n    grd.addColorStop(0, 'rgba(20, 68, 204, .1)');\n\n    ctx.fillStyle = grd;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n  xpro2() {\n    this.util.processPixel('contrast', 10);\n\n    var ctx = this.layer.getContext('2d'),\n        width = this.layer.width,\n        height = this.layer.height,\n        x0 = width / 2,\n        y0 = height / 2,\n        r0 = (width > height ? width : height) / 6,\n        x1 = width / 2,\n        y1 = height / 2,\n        r1 = (width > height ? width : height) / 2;\n\n    var grd = ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n    grd.addColorStop(0, 'rgba(230, 231, 224, .2)');\n    grd.addColorStop(1, 'rgba(13, 27, 86, .4)');\n\n    ctx.fillStyle = grd;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n  lofi() {\n    this.util.processPixel('saturation', 5);\n    this.util.processPixel('contrast', 20);\n\n    var ctx = this.layer.getContext('2d'),\n        width = this.layer.width,\n        height = this.layer.height,\n        x0 = width / 2,\n        y0 = height / 2,\n        r0 = (width > height ? width : height) / 3,\n        x1 = width / 2,\n        y1 = height / 2,\n        r1 = (width > height ? width : height) / 2;\n\n    var grd = ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n    grd.addColorStop(0, 'transparent');\n    grd.addColorStop(1, 'rgba(34, 34, 34, .2)');\n\n    ctx.fillStyle = grd;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n} \n\nexport default new PlotitFilter();\n \n\n\n/** WEBPACK FOOTER **\n ** ./src/core/filter.js\n **/","export default class PlotitLayer {\n  constructor(canvas, id) {\n    this.canvas = canvas;\n    this.id = id;\n    this.layer = this.new(id);\n  }\n\n  new(id) {\n    let canvas = this.canvas,\n        width = canvas.width,\n        height = canvas.height,\n        top = canvas.style.top,\n        left = canvas.style.left;\n\n    let newCanvas = document.createElement('canvas');\n\n    newCanvas.id = id;\n    newCanvas.width = width;\n    newCanvas.height = height;\n    newCanvas.style.position = 'absolute';\n    newCanvas.style.top = top;\n    newCanvas.style.left = left;\n\n    return newCanvas;\n  }\n\n  clear() {\n    if (!document.querySelector('#' + this.id)) return;\n\n    let $frame = document.querySelector('#' + this.id),\n        $overlay = document.querySelector('#overlay'),\n        parent = $frame.parentNode;\n\n    parent.removeChild($frame);\n\n    if ($overlay) {\n      parent.removeChild($overlay);\n    }\n  }\n\n   // append to the panel\n  addFrame(scale) {\n\n    this.clear();\n\n    let originW = this.layer.width,\n        originH = this.layer.height,\n        layerStyle = this.layer.style,\n        originT = parseFloat(layerStyle.top.replace('px', '')),\n        originL = parseFloat(layerStyle.left.replace('px', ''));\n\n    switch(scale.name) {\n      case '1:1':\n      case '4:3':\n      case '3:4':\n        let x = scale.x,\n            y = scale.y,\n            wh = originW / originH,\n            s = x / y,\n            min;\n\n        if (wh < s) {\n          this.layer.width = originW;\n          this.layer.height = originW / x * y;\n        } else if (wh > s) {\n          this.layer.height = originH;\n          this.layer.width = originH / y * x;\n        } else {\n          let min = originW < originH ? originW : originH;\n          this.layer.width = min;\n          this.layer.height = min;\n        }\n      break;\n\n      case '自定义':\n      default:\n      break;\n    }\n\n    layerStyle.top = originT + (originH - this.layer.height) / 2 + 'px';\n    layerStyle.left = originL + (originW - this.layer.width) / 2 + 'px';\n\n\n    this.drawCropImage(this.layer, {\n      originW: originW,\n      originH: originH,\n      cropW: this.layer.width,\n      cropH: this.layer.height\n    });\n    \n    this.drawFrameLine(this.layer);\n    \n    this.addOverlay(originW, originH);\n    \n    this.canvas.parentNode.appendChild(this.layer);\n  \n    return {\n      layer: this.layer,\n      originW: originW,\n      originH: originH,\n      cropW: this.layer.width,\n      cropH: this.layer.height\n    };\n  }\n\n  drawCropImage(canvas, opts) {\n    let cropCxt = canvas.getContext('2d'),\n        originCtx = this.canvas.getContext('2d'),\n        x = opts.x || (opts.originW - opts.cropW) / 2,\n        y = opts.y || (opts.originH - opts.cropH) / 2;\n\n    let originImageData = originCtx.getImageData(x, y, opts.originW, opts.originH);\n\n    cropCxt.clearRect(0, 0, opts.cropW, opts.cropH);\n    cropCxt.putImageData(originImageData, 0, 0);\n  }\n\n  drawFrameLine(canvas) {\n    let cxt = canvas.getContext('2d'),\n        w = canvas.width,\n        h = canvas.height;\n\n    cxt.strokeStyle = 'rgba(255, 255, 255, .5)';\n    cxt.lineWidth = 1;\n    cxt.strokeRect(0, h / 3, w, h / 3);\n    cxt.strokeRect(w / 3, 0, w / 3, h);\n\n    cxt.strokeStyle = '#FFF';\n    cxt.lineWidth = 5;\n    cxt.strokeRect(0 , 0, w, h);\n\n    let rW = 10;\n    cxt.fillStyle = '#FFF';\n    cxt.fillRect(0, 0, rW, rW);\n    cxt.fillRect(w - rW, 0, rW, rW);\n    cxt.fillRect(w - rW, h - rW, rW, rW);\n    cxt.fillRect(0, h - rW, rW, rW);\n  }\n\n  addOverlay(w, h) {\n\n    if (document.querySelector('#overlay')) return;\n\n    this.overlay = this.new('overlay');\n\n    let overlayCtx = this.overlay.getContext('2d');\n    overlayCtx.fillStyle = 'rgba(0, 0, 0, .7)';\n    overlayCtx.fillRect(0, 0, w, h);\n\n    this.canvas.parentNode.appendChild(this.overlay);\n  }\n\n}\n \n\n\n/** WEBPACK FOOTER **\n ** ./src/core/layer.js\n **/","import Layer from './layer';\n\nclass PlotitResize {\n\n  bindUtil(util) {\n    this.util = util;\n  }\n\n  cropImage(canvas, opts) {\n    let ctx = canvas.getContext('2d'),\n        ct = parseInt(canvas.style.top.replace('px', '')),\n        cl = parseInt(canvas.style.left.replace('px', '')),\n        cw = canvas.width,\n        ch = canvas.height,\n        x = opts.x,\n        y = opts.y,\n        w = opts.w,\n        h = opts.h;\n\n    let cropImageData = ctx.getImageData(x, y, w, h);\n\n    ctx.putImageData(cropImageData, 0, 0);\n\n    canvas.width = w;\n    canvas.height = h;\n    canvas.style.left = (cl + (cw - w) / 2) + 'px';\n    canvas.style.top = (ct + (ch - h) / 2) + 'px';\n  }\n\n  newFrame(canvas, scale) {\n    this.canvas = canvas;\n    this.Layer = new Layer(canvas, 'newFrame');\n    this.layerInfo = this.Layer.addFrame(scale);\n  }\n\n  removeFrame() {\n    if (this.Layer) {\n      this.Layer.clear();\n    }\n  }\n\n  bindFrame(scale) {\n    let self = this,\n        $layer = this.layerInfo.layer,\n        originW = this.layerInfo.originW,\n        originH = this.layerInfo.originH,\n        cropW = this.layerInfo.cropW,\n        cropH = this.layerInfo.cropH,\n        isDragging = false,\n        pos = {};\n\n\n    function isInTheRange(x, y, size) {\n      return (x > size && x < (cropW - size) \n          && y > size && y < (cropH - size));\n    }\n\n    $layer.addEventListener('mousedown', function dragging(e) {\n      \n      let x = e.layerX,\n          y = e.layerY,\n          elem = e.target || e.srcElement,\n          moveSize = 10;\n\n      if (isInTheRange(x, y, moveSize)) {\n        isDragging = true;\n        pos.dragX = x;\n        pos.dragY = y;\n      }\n\n    }, false);\n\n    $layer.addEventListener('mousemove', function moving(e) {\n      \n      let x = e.layerX,\n          y = e.layerY,\n          moveSize = 10,\n          cropStyle = $layer.style,\n          originStyle = self.canvas.style,\n          cropT = parseFloat(cropStyle.top.replace('px', '')) || 0,\n          cropL = parseFloat(cropStyle.left.replace('px', '')) || 0,\n          originT = parseFloat(originStyle.top.replace('px', '')) || 0,\n          originL = parseFloat(originStyle.left.replace('px', '')) || 0;\n\n      if (isInTheRange(x, y, moveSize) && isDragging) {\n\n        pos.moveX = x;\n        pos.moveY = y;\n\n        let movedx = cropL + (pos.moveX - pos.dragX),\n            movedy = cropT + (pos.moveY - pos.dragY),\n            mindx = originL,\n            mindy = originT,\n            maxdx = originL + originW - cropW,\n            maxdy = originT + originH - cropH;\n\n        let styleTop = (movedy >= mindy && movedy <= maxdy) ? movedy : cropT,\n            styleLeft = (movedx >= mindx && movedx <= maxdx) ? movedx : cropL;\n\n        $layer.style.top = styleTop + 'px';\n        $layer.style.left = styleLeft + 'px';\n\n        self.dx = (styleLeft - originL < 0) ? 0 : styleLeft - originL;\n        self.dy = (styleTop - originT < 0) ? 0 : styleTop - originT;\n\n        self.Layer.drawCropImage($layer, {\n          originH: originH,\n          originW: originW,\n          cropH: cropH,\n          cropW: cropW,\n          x: self.dx,\n          y: self.dy\n        });\n\n        self.Layer.drawFrameLine($layer);\n\n        self.setPreview(self.$preview, self.dx, self.dy);\n      }\n\n    }, false);\n\n\n    $layer.addEventListener('mouseup', function dropping(e) {      \n      let x = e.layerX,\n          y = e.layerY,\n          moveSize = 10;\n\n      isDragging = false;\n      if (isInTheRange(x, y, moveSize)) {\n        console.log('dropping', x, y);\n      }\n\n    }, false);\n\n  }\n\n  getFrame() {\n    if (this.cropImageData) {\n      let originW = this.canvas.width,\n          originH = this.canvas.height,\n          canvasStyle = this.canvas.style,\n          originT = parseFloat(canvasStyle.top.replace('px', '')),\n          originL = parseFloat(canvasStyle.left.replace('px', '')),\n          cropW = this.cropImageData.width,\n          cropH = this.cropImageData.height,\n          originCtx = this.canvas.getContext('2d');\n\n      this.canvas.width = cropW;\n      this.canvas.height = cropH;\n      originCtx.putImageData(this.cropImageData, 0, 0);\n\n      canvasStyle.top = originT + (originH - cropH) / 2 + 'px';\n      canvasStyle.left = originL + (originW - cropW) / 2 + 'px';\n\n      this.removeFrame();\n    }  \n\n    return this.resizeConfig || {};\n  }\n\n  setPreview(canvas, x, y) {\n    let originCtx = this.canvas.getContext('2d'),\n        previewCtx = canvas.getContext('2d'),\n        previewW = canvas.width,\n        cropW = this.layerInfo.cropW,\n        cropH = this.layerInfo.cropH;\n        \n    x = x || (this.layerInfo.originW - cropW) / 2,\n    y = y || (this.layerInfo.originH - cropH) / 2;\n\n    this.$preview = canvas;\n    \n    this.resizeConfig = {\n      x: x,\n      y: y,\n      w: cropW,\n      h: cropH\n    };\n\n    this.cropImageData = originCtx.getImageData(x, y, cropW, cropH);\n\n    canvas.width = 224;\n    canvas.height = canvas.width / cropW * cropH;\n  \n    let tempCanvas = document.createElement('canvas'),\n        tempCtx = tempCanvas.getContext('2d');\n\n    tempCanvas.width = cropW;\n    tempCanvas.height = cropH;\n    tempCtx.putImageData(this.cropImageData, 0, 0);\n\n    let tempImg = new Image(),\n        tempImgUrl = tempCanvas.toDataURL();\n\n    tempImg.src = tempImgUrl;\n\n    previewCtx.drawImage(tempImg, 0, 0, canvas.width, canvas.height);\n  }\n\n}\n\nexport default new PlotitResize();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/resize.js\n **/"],"sourceRoot":""}